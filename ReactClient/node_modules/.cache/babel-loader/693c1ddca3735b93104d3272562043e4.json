{"ast":null,"code":"import axios from 'axios';\n\nclass Auth {\n  constructor() {\n    this.err = \"\";\n    this.authenticated = false;\n    this.token = \"\";\n    this.user = \"\";\n    this.login = this.login.bind(this);\n    this.setPassword = this.setPassword.bind(this);\n    this.logout = this.logout.bind(this);\n    this.isAuthenticated = this.isAuthenticated.bind(this);\n  }\n\n  setPassword(password) {\n    console.log(\"Setpassword --- \" + this.password);\n    this.password = password;\n  }\n\n  login(username, password) {\n    //this.setState({username: username, password: password})\n    axios.post(\"login\", {\n      username: username,\n      password: password\n    }).then(res => {\n      if (res.data.error) {\n        this.err = res.data.error;\n        console.log(\"The error is \" + res.data.error);\n        return false;\n      } else {\n        this.authenticated = true;\n        this.token = res.data.token;\n        this.user = res.data.user;\n        localStorage.setItem(\"token\", res.data.token);\n        console.log(res);\n        return true;\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(\"We have run the log in function \");\n  }\n\n  logout() {\n    console.log(\"Logging out...\");\n    this.authenticated = false;\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n}\n\nexport default new Auth();","map":{"version":3,"sources":["/Users/mark/Desktop/School/Subjects/SENG350/spyBot/demoreactapp/client/src/components/auth.js"],"names":["axios","Auth","constructor","err","authenticated","token","user","login","bind","setPassword","logout","isAuthenticated","password","console","log","username","post","then","res","data","error","localStorage","setItem","catch"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,IAAN,CAAU;AAENC,EAAAA,WAAW,GAAE;AAGT,SAAKC,GAAL,GAAW,EAAX;AACA,SAAKC,aAAL,GAAqB,KAArB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,IAAL,GAAY,EAAZ;AAGA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKG,eAAL,GAAuB,KAAKA,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAvB;AAEH;;AAIDC,EAAAA,WAAW,CAACG,QAAD,EAAU;AACjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqB,KAAKF,QAAtC;AACA,SAAKA,QAAL,GAAgBA,QAAhB;AACH;;AAEDL,EAAAA,KAAK,CAACQ,QAAD,EAAWH,QAAX,EAAoB;AAErB;AAEAZ,IAAAA,KAAK,CAACgB,IAAN,CAAW,OAAX,EAAoB;AAAED,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBH,MAAAA,QAAQ,EAAEA;AAAhC,KAApB,EAAgEK,IAAhE,CAAsEC,GAAG,IAAI;AAEzE,UAAGA,GAAG,CAACC,IAAJ,CAASC,KAAZ,EAAkB;AAEd,aAAKjB,GAAL,GAAWe,GAAG,CAACC,IAAJ,CAASC,KAApB;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBI,GAAG,CAACC,IAAJ,CAASC,KAAvC;AACA,eAAO,KAAP;AAEH,OAND,MAOI;AAEA,aAAKhB,aAAL,GAAqB,IAArB;AACA,aAAKC,KAAL,GAAaa,GAAG,CAACC,IAAJ,CAASd,KAAtB;AACA,aAAKC,IAAL,GAAYY,GAAG,CAACC,IAAJ,CAASb,IAArB;AACAe,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACC,IAAJ,CAASd,KAAvC;AACAQ,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACA,eAAO,IAAP;AACH;AAEJ,KAnBD,EAmBGK,KAnBH,CAmBSpB,GAAG,IAAI;AACZU,MAAAA,OAAO,CAACC,GAAR,CAAYX,GAAZ;AACH,KArBD;AAuBAU,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACH;;AAGDJ,EAAAA,MAAM,GAAE;AACJG,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,SAAKV,aAAL,GAAqB,KAArB;AACH;;AAEDO,EAAAA,eAAe,GAAE;AACb,WAAO,KAAKP,aAAZ;AACH;;AA/DK;;AAkEV,eAAe,IAAIH,IAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\nclass Auth{\n\n    constructor(){\n\n\n        this.err = \"\";\n        this.authenticated = false;\n        this.token = \"\";\n        this.user = \"\";\n\n\n        this.login = this.login.bind(this)\n        this.setPassword = this.setPassword.bind(this)\n        this.logout = this.logout.bind(this)\n        this.isAuthenticated = this.isAuthenticated.bind(this)\n\n    }\n\n\n\n    setPassword(password){\n        console.log(\"Setpassword --- \" + this.password)\n        this.password = password\n    }\n\n    login(username, password){\n\n        //this.setState({username: username, password: password})\n\n        axios.post(\"login\", { username: username, password: password }).then( res => {\n            \n            if(res.data.error){\n\n                this.err = res.data.error\n                console.log(\"The error is \" + res.data.error);\n                return false;\n\n            }\n            else{\n\n                this.authenticated = true;\n                this.token = res.data.token;\n                this.user = res.data.user;\n                localStorage.setItem(\"token\", res.data.token);\n                console.log(res);\n                return true;\n            }\n\n        }).catch(err => {\n            console.log(err)\n        })\n\n        console.log(\"We have run the log in function \")\n    }\n\n\n    logout(){\n        console.log(\"Logging out...\")\n        this.authenticated = false\n    }\n\n    isAuthenticated(){\n        return this.authenticated\n    }\n}\n\nexport default new Auth();"]},"metadata":{},"sourceType":"module"}
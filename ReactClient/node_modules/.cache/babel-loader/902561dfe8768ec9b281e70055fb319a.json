{"ast":null,"code":"import axios from 'axios';\n\nclass Auth {\n  constructor() {\n    this.authenticated = false;\n    this.username = \"\";\n    this.password = \"\";\n    this.err = \"\";\n  }\n\n  setPassword(password) {\n    console.log(\"Setpassword --- \" + this.password);\n    this.password = password;\n  }\n\n  async login(username, password) {\n    //this.setState({username: username, password: password})\n    axios.post(\"login\", {\n      username: username,\n      password: password\n    }).then(res => {\n      if (res.data.error) {\n        this.setState({\n          err: res.data.error\n        }, () => {\n          console.log(\"There is an error --> \" + this.state.err);\n        });\n        console.log(\"The error is \" + this.state.err);\n      } else {\n        localStorage.setItem(\"token\", res.data.token);\n        console.log(res);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n    /*\n    \n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({password : this.password})\n    };\n    try {\n        const response = await fetch('http://localhost:3002/login', requestOptions)\n        const data = await response.json()\n        if (data.outcome === 'match') {\n            this.authenticated = true\n        }\n        else if (data.outcome === 'no match') {\n             this.authenticated = false\n        }\n    }\n    catch (error) {\n        return (console.log(\"Error with the authentication : \" + error))\n    }\n    */\n\n    console.log(\"We have run the log in function \");\n  }\n\n  logout() {\n    console.log(\"Logging out...\");\n    this.authenticated = false;\n  }\n\n  isAuthenticated() {\n    return this.authenticated;\n  }\n\n}\n\nexport default new Auth();","map":{"version":3,"sources":["/Users/mark/Desktop/School/Subjects/SENG350/spyBot/demoreactapp/client/src/components/auth.js"],"names":["axios","Auth","constructor","authenticated","username","password","err","setPassword","console","log","login","post","then","res","data","error","setState","state","localStorage","setItem","token","catch","logout","isAuthenticated"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,IAAN,CAAU;AAENC,EAAAA,WAAW,GAAE;AAET,SAAKC,aAAL,GAAqB,KAArB;AACA,SAAKC,QAAL,GAAe,EAAf;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,GAAL,GAAW,EAAX;AAEH;;AAIDC,EAAAA,WAAW,CAACF,QAAD,EAAU;AACjBG,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAqB,KAAKJ,QAAtC;AACA,SAAKA,QAAL,GAAgBA,QAAhB;AACH;;AAEW,QAALK,KAAK,CAAEN,QAAF,EAAYC,QAAZ,EAAqB;AAE7B;AAGAL,IAAAA,KAAK,CAACW,IAAN,CAAW,OAAX,EAAoB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,MAAAA,QAAQ,EAAEA;AAAhC,KAApB,EAAgEO,IAAhE,CAAsEC,GAAG,IAAI;AAEzE,UAAGA,GAAG,CAACC,IAAJ,CAASC,KAAZ,EAAkB;AAEd,aAAKC,QAAL,CAAc;AAACV,UAAAA,GAAG,EAAEO,GAAG,CAACC,IAAJ,CAASC;AAAf,SAAd,EAAqC,MAAM;AACvCP,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2B,KAAKQ,KAAL,CAAWX,GAAlD;AACH,SAFD;AAIAE,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkB,KAAKQ,KAAL,CAAWX,GAAzC;AAEH,OARD,MAQK;AACDY,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BN,GAAG,CAACC,IAAJ,CAASM,KAAvC;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH;AAEJ,KAfD,EAeGQ,KAfH,CAeSf,GAAG,IAAI;AACZE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACH,KAjBD;AAkBA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGQE,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACH;;AAGDa,EAAAA,MAAM,GAAE;AACJd,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,SAAKN,aAAL,GAAqB,KAArB;AACH;;AAEDoB,EAAAA,eAAe,GAAE;AACb,WAAO,KAAKpB,aAAZ;AACH;;AA3EK;;AA8EV,eAAe,IAAIF,IAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\nclass Auth{\n\n    constructor(){\n\n        this.authenticated = false\n        this.username= \"\"\n        this.password = \"\"\n        this.err = \"\"\n\n    }\n\n\n\n    setPassword(password){\n        console.log(\"Setpassword --- \" + this.password)\n        this.password = password\n    }\n\n     async login (username, password){\n\n        //this.setState({username: username, password: password})\n\n\n        axios.post(\"login\", { username: username, password: password }).then( res => {\n            \n            if(res.data.error){\n\n                this.setState({err: res.data.error}, () => {\n                    console.log(\"There is an error --> \" + this.state.err);\n                })\n\n                console.log(\"The error is \" + this.state.err);\n\n            }else{\n                localStorage.setItem(\"token\", res.data.token)\n                console.log(res);\n            }\n\n        }).catch(err => {\n            console.log(err)\n        })\n        /*\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({password : this.password})\n        };\n        try {\n            const response = await fetch('http://localhost:3002/login', requestOptions)\n            const data = await response.json()\n            if (data.outcome === 'match') {\n                this.authenticated = true\n            }\n            else if (data.outcome === 'no match') {\n\n                this.authenticated = false\n            }\n        }\n        catch (error) {\n            return (console.log(\"Error with the authentication : \" + error))\n        }\n        */\n\n        console.log(\"We have run the log in function \")\n    }\n\n\n    logout(){\n        console.log(\"Logging out...\")\n        this.authenticated = false\n    }\n\n    isAuthenticated(){\n        return this.authenticated\n    }\n}\n\nexport default new Auth();"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/mark/Desktop/Projects/StockTradingApp/ReactClient/src/Components/Order/order.js\";\nimport React, { Component } from 'react';\nimport transaction from '../../Helper/transaction';\nimport './order.css'; //2 types of orders - triggered and market\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Order extends Component {\n  constructor() {\n    super();\n\n    this.handleChange = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      this.setState({\n        [nam]: val\n      });\n\n      if (event.target.value === \"triggered\") {\n        this.setState({\n          triggered: true\n        });\n      }\n\n      if (event.target.value === \"market\") {\n        this.setState({\n          triggered: false\n        });\n      }\n    };\n\n    this.makeOrder = event => {\n      event.preventDefault();\n      console.log(\"making an order\");\n      console.log(event.target.name); //do not submit form if no amount has been input\n\n      if (!this.state.amount) {\n        return;\n      }\n\n      console.log(\"The event target name is -->  \", event.target.name);\n\n      if (event.target.name === \"Buy\" || event.target.name === \"Sell\") {\n        console.log(\"In here 1\");\n\n        if (!this.state.triggered) {\n          //regular buy\n          if (event.target.name === \"Buy\") {\n            transaction.buy(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount).then(response => {\n              //allow commit buy only after completing buy successfully\n              if (response.data) {\n                if (response.data.status === \"passed\") {\n                  this.setState({\n                    error: \"\",\n                    orderConfirmation: true\n                  });\n                }\n              } else if (response.error) {\n                this.setState({\n                  error: response.error\n                });\n              }\n            });\n          } else {\n            //regular sell\n            transaction.sell(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount).then(response => {\n              //allow commit sell only after completing buy successfully\n              if (response.data.status === \"passed\") {\n                console.log(\"sell has returned data\");\n                this.setState({\n                  orderConfirmation: true\n                });\n              }\n            });\n          }\n        } else {\n          //triggered buy\n          if (event.target.name === \"Buy\") {\n            transaction.setBuy(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount, this.state.triggerVal).then(response => {});\n          } //triggered sell\n          else {\n            transaction.setSell(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount, this.state.triggerVal).then(response => {});\n          }\n        }\n\n        return;\n      }\n\n      if (event.target.name === \"Commit Buy\" || event.target.name === \"Commit Sell\") {\n        console.log(\"In here 2\"); //commit last buy transaction\n\n        if (event.target.name === \"Commit Buy\") {\n          transaction.commitBuy(localStorage.getItem(\"userid\")).then(response => {\n            console.log(\"Commit buy response is == \", response);\n\n            if (response.data) {\n              if (response.data.status === \"passed\") {\n                this.props.orderCompleted();\n              }\n            } else if (response.error) {\n              this.setState({\n                error: response.error\n              });\n            }\n          });\n        } //commit last sell transaction\n        else {\n          transaction.commitSell(localStorage.getItem(\"userid\")).then(response => {\n            if (response.data.status === \"passed\") {\n              console.log(\"commitsell has passed\");\n\n              if (response.data) {\n                if (response.data.status === \"passed\") {\n                  this.props.orderCompleted();\n                }\n              } else if (response.error) {\n                this.setState({\n                  error: response.error\n                });\n              }\n            }\n          });\n        }\n\n        return;\n      }\n\n      if (event.target.name === \"Cancel Buy\" || event.target.name === \"Cancel Sell\") {\n        console.log(\"In here 3\");\n\n        if (this.state.triggered) {\n          //cancel last set buy\n          if (event.target.name === \"Cancel Buy\") {\n            transaction.cancelSetBuy(localStorage.getItem(\"userid\"), this.props.stockname).then(response => {\n              console.log(response);\n\n              if (response.data) {\n                if (response.data.status === \"passed\") {\n                  this.setState({\n                    error: \"\",\n                    orderConfirmation: true\n                  });\n                }\n              } else if (response.error) {\n                this.setState({\n                  error: response.error\n                });\n              }\n            });\n          } //cancel last set sell\n          else {\n            transaction.cancelSetSell(localStorage.getItem(\"userid\"), this.props.stockname).then(response => {\n              if (response.data.status === \"passed\") {\n                this.setState({\n                  orderConfirmation: true\n                });\n              }\n            });\n          }\n        } else if (!this.state.triggered) {\n          if (event.target.name === \"Cancel Buy\") {\n            transaction.cancelBuy(localStorage.getItem(\"userid\")).then(response => {\n              console.log(response);\n\n              if (response.data) {\n                if (response.data.status === \"passed\") {\n                  this.props.orderCompleted();\n                }\n              } else if (response.error) {\n                this.setState({\n                  error: response.error\n                });\n              }\n            });\n          } else {\n            transaction.cancelSell(localStorage.getItem(\"userid\")).then(response => {\n              if (response.data.status === \"passed\") {\n                this.setState({\n                  orderConfirmation: true\n                });\n              }\n            });\n          }\n        }\n\n        return;\n      }\n    };\n\n    this.state = {\n      ordertype: \"\",\n      triggered: false,\n      orderCompleted: false,\n      error: \"\",\n      orderConfirmation: false\n    };\n  }\n\n  render() {\n    let button;\n    let confirmButtons;\n    let cancelButtonName = \"Cancel \" + this.props.ordertype;\n    let commitButtonName = \"Commit \" + this.props.ordertype;\n    button = /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"Order-submitBtn\",\n      name: this.props.ordertype,\n      onClick: this.makeOrder,\n      type: \"button\",\n      children: [\"  \", this.state.triggered ? \"Set\" : \"\", \" \", this.props.ordertype, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 18\n    }, this);\n    confirmButtons = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"btnContainer\",\n      children: [!this.state.triggered && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"Order-submitBtn\",\n        name: commitButtonName,\n        type: \"button\",\n        onClick: this.makeOrder,\n        children: [\"Commit \", this.props.ordertype]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"Order-cancelBtn\",\n        name: cancelButtonName,\n        type: \"button\",\n        onClick: this.makeOrder,\n        children: [\"Cancel \", this.state.triggered ? \"Set\" : \"\", \" \", this.props.ordertype]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 29\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 26\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Order\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"Order-header\",\n        children: \"Place an order.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Order-descriptioncontainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"Order-stockname\",\n          children: this.props.stockname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), this.props.stockprice && /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"Order-stockprice\",\n          children: [this.props.stockprice, \" $\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }, this), this.props.amountowned && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"Order-labelowned\",\n            children: \"Owned\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"Order-stockprice\",\n            children: [this.props.amountowned, \" $\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Order-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"Order-label\",\n          children: [this.props.ordertype, \" type \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"Order-dropdown\",\n          name: \"order type\",\n          id: \"ordertype\",\n          onChange: this.handleChange,\n          disabled: this.state.orderConfirmation,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"market\",\n            children: [\"Market \", this.props.ordertype]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"triggered\",\n            children: [\"Set \", this.props.ordertype, \" Trigger\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Order-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"Order-label\",\n            children: [this.props.ordertype, \" amount \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"Order-input\",\n            name: \"amount\",\n            type: \"number\",\n            min: \"1\",\n            onChange: this.handleChange,\n            readOnly: this.state.orderConfirmation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this), this.state.triggered && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Order-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"Order-label\",\n            children: [this.props.ordertype, \" trigger  \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"Order-input\",\n            name: \"triggerVal\",\n            type: \"number\",\n            min: \"1\",\n            readOnly: this.state.orderConfirmation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: this.state.orderConfirmation ? confirmButtons : button\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), this.state.error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Order;","map":{"version":3,"sources":["/Users/mark/Desktop/Projects/StockTradingApp/ReactClient/src/Components/Order/order.js"],"names":["React","Component","transaction","Order","constructor","handleChange","event","nam","target","name","val","value","setState","triggered","makeOrder","preventDefault","console","log","state","amount","buy","localStorage","getItem","props","stockname","then","response","data","status","error","orderConfirmation","sell","setBuy","triggerVal","setSell","commitBuy","orderCompleted","commitSell","cancelSetBuy","cancelSetSell","cancelBuy","cancelSell","ordertype","render","button","confirmButtons","cancelButtonName","commitButtonName","stockprice","amountowned"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport transaction from '../../Helper/transaction';\nimport './order.css'\n\n\n//2 types of orders - triggered and market\nclass Order extends Component {\n\n    constructor(){\n        super()\n\n        this.state = {\n            ordertype : \"\",\n            triggered : false,\n            orderCompleted:false,\n            error: \"\",\n            orderConfirmation : false,\n        }\n\n\n    }\n\n    handleChange = (event) => {\n\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n\n\n        if(event.target.value === \"triggered\"){\n            this.setState({\n                triggered: true\n            })\n        }\n        if(event.target.value === \"market\"){\n            this.setState({\n                triggered: false\n            })\n        }\n    }\n\n  \n    //TODO: make this less messy\n    makeOrder = (event) => {\n\n        event.preventDefault()\n        console.log(\"making an order\")\n        console.log(event.target.name)\n\n        //do not submit form if no amount has been input\n        if(!this.state.amount){\n            return\n        }\n        \n        console.log(\"The event target name is -->  \", event.target.name)\n\n        if(event.target.name === \"Buy\" || event.target.name === \"Sell\"){  \n\n            console.log(\"In here 1\")\n\n            if(!this.state.triggered){\n                //regular buy\n                if(event.target.name === \"Buy\"){\n                    transaction.buy(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount).then((response) => {\n                        //allow commit buy only after completing buy successfully\n\n                        if(response.data){\n                            if(response.data.status === \"passed\"){\n                                this.setState({\n                                    error: \"\",\n                                    orderConfirmation: true\n                                })\n                            }\n                        }\n                        else if(response.error){\n                            this.setState({\n                                error: response.error\n                            })\n                        }\n\n                    })\n\n                } else{\n                    //regular sell\n                    transaction.sell(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount).then((response) => {\n                        //allow commit sell only after completing buy successfully\n                        if(response.data.status === \"passed\"){\n                            console.log(\"sell has returned data\")\n                            this.setState({\n                                orderConfirmation: true\n                            })\n                        }\n                    })\n                }\n            }\n            else{\n                //triggered buy\n                if(event.target.name === \"Buy\"){\n                    transaction.setBuy(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount, this.state.triggerVal).then((response) => {\n\n                    })\n                } \n                //triggered sell\n                else {\n                    transaction.setSell(localStorage.getItem(\"userid\"), this.props.stockname, this.state.amount, this.state.triggerVal).then((response) => {\n\n                    })\n                }\n            }\n            return\n        }\n\n        if(event.target.name === \"Commit Buy\" || event.target.name === \"Commit Sell\"){\n\n            console.log(\"In here 2\")\n\n            //commit last buy transaction\n            if(event.target.name === \"Commit Buy\"){\n                transaction.commitBuy(localStorage.getItem(\"userid\")).then(response => {\n                    console.log(\"Commit buy response is == \", response)\n\n                    if(response.data){\n                        if(response.data.status === \"passed\"){\n                            this.props.orderCompleted()\n                        }\n                    }\n                    else if(response.error){\n                        this.setState({\n                            error: response.error\n                        })\n                    }\n\n                })\n            } \n            //commit last sell transaction\n            else{\n                transaction.commitSell(localStorage.getItem(\"userid\")).then(response => {\n                    if(response.data.status === \"passed\"){\n                        console.log(\"commitsell has passed\")\n                        if(response.data){\n                            if(response.data.status === \"passed\"){\n                                this.props.orderCompleted()\n                            }\n                        }\n                        else if(response.error){\n                            this.setState({\n                                error: response.error\n                            })\n                        }\n                    }\n\n                })\n            }\n            return\n        }\n\n        if(event.target.name === \"Cancel Buy\" || event.target.name === \"Cancel Sell\"){\n\n            console.log(\"In here 3\")            \n\n            if(this.state.triggered){\n                //cancel last set buy\n                if(event.target.name === \"Cancel Buy\"){ \n                    transaction.cancelSetBuy(localStorage.getItem(\"userid\"), this.props.stockname).then(response => {\n                        console.log(response)\n                        if(response.data){\n                            if(response.data.status === \"passed\"){\n                                this.setState({\n                                    error: \"\",\n                                    orderConfirmation: true\n                                })\n                            }\n                        }\n                        else if(response.error){\n                            this.setState({\n                                error: response.error\n                            })\n                        }\n                    })\n                }\n                //cancel last set sell\n                else{\n                    transaction.cancelSetSell(localStorage.getItem(\"userid\"), this.props.stockname).then(response => {\n                        if(response.data.status === \"passed\"){\n                            this.setState({\n                                orderConfirmation: true\n                            })\n                        }\n                    })\n                }\n            }\n            \n            else if (!this.state.triggered){\n                if(event.target.name === \"Cancel Buy\"){\n                    transaction.cancelBuy(localStorage.getItem(\"userid\")).then(response => {\n                        console.log(response)\n                        if(response.data){\n                            if(response.data.status === \"passed\"){\n                                this.props.orderCompleted()\n                            }\n                        }\n                        else if(response.error){\n                            this.setState({\n                                error: response.error\n                            })\n                        }\n                    })\n                }\n                else{\n                    transaction.cancelSell(localStorage.getItem(\"userid\")).then(response => {\n                        if(response.data.status === \"passed\"){\n                            this.setState({\n                                orderConfirmation: true\n                            })\n                        }\n                    })\n                }\n            }\n            return\n        }\n\n\n    }\n\n\n    render() {\n\n        let button;\n        let confirmButtons;\n        let cancelButtonName = \"Cancel \" + this.props.ordertype\n        let commitButtonName = \"Commit \" + this.props.ordertype\n\n        button = <button className=\"Order-submitBtn\" name = {this.props.ordertype} onClick={this.makeOrder} type = \"button\">  {this.state.triggered ? \"Set\" : \"\"} {this.props.ordertype} </button>\n\n        confirmButtons = <div className='btnContainer'>\n                            {!this.state.triggered && \n                                <button className=\"Order-submitBtn\" name = {commitButtonName} type=\"button\" onClick={this.makeOrder}>Commit {this.props.ordertype}</button>\n                            }\n                            <button className=\"Order-cancelBtn\" name = {cancelButtonName} type=\"button\" onClick={this.makeOrder}>Cancel {this.state.triggered ? \"Set\" : \"\"} {this.props.ordertype}</button>\n                        </div>\n\n\n\n        return (\n            <div className=\"Order\">\n\n                <h2 className=\"Order-header\">Place an order.</h2>\n\n                <div className=\"Order-descriptioncontainer\">\n\n                    <h3 className=\"Order-stockname\">{this.props.stockname}</h3>\n\n                {this.props.stockprice && \n                    <h3 className=\"Order-stockprice\">{this.props.stockprice} $</h3>\n                }\n\n                {this.props.amountowned && \n                    <>\n                        <label className=\"Order-labelowned\">Owned</label>\n                        <h3 className=\"Order-stockprice\">{this.props.amountowned} $</h3>\n                    </>                \n                }\n                </div>\n\n                <div className=\"Order-container\">\n                    <label className=\"Order-label\">{this.props.ordertype} type </label>\n                    <select className=\"Order-dropdown\" name=\"order type\" id=\"ordertype\" onChange={this.handleChange} disabled={this.state.orderConfirmation}>\n                        <option value=\"market\">Market {this.props.ordertype}</option>\n                        <option value=\"triggered\">Set {this.props.ordertype} Trigger</option>\n                    </select>\n                </div>\n\n\n                <form className=\"\">\n\n                    <div className=\"Order-container\">\n                        <label className=\"Order-label\">{this.props.ordertype} amount </label>\n                        <input className=\"Order-input\" name=\"amount\" type=\"number\" min=\"1\" onChange={this.handleChange} readOnly={this.state.orderConfirmation}></input>\n                    </div>\n                        \n                    {this.state.triggered && \n                        <div className=\"Order-container\">\n                            <label className=\"Order-label\">{this.props.ordertype} trigger  </label>\n                            <input className=\"Order-input\" name=\"triggerVal\" type=\"number\" min=\"1\" readOnly={this.state.orderConfirmation} ></input>\n                        </div>\n                    }\n\n                    <div>\n                        {this.state.orderConfirmation ? confirmButtons : button }\n                    </div>\n\n                    {this.state.error}\n            \n                </form>\n\n            </div>\n        );\n\n    }\n  }\n  \n  export default Order;"]},"metadata":{},"sourceType":"module"}